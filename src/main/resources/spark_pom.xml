<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion> 
	<!--
	<parent>
		<groupId>com.meitun</groupId>
		<artifactId>parent</artifactId>
		<version>1.2.0.RELEASE</version>
	</parent>
	-->
	
	<groupId>com.meitun</groupId>
	<artifactId>ai-aliyun-spark</artifactId>
	<version>1.0-SNAPSHOT</version>
	<packaging>jar</packaging>
	<name>ai-aliyun-spark</name>
	<url>http://maven.apache.org</url>
	
	<!--
	<modules>		
		<module>youwei-store-client</module>
		<module>youwei-store-common</module>
		<module>youwei-store-core</module>
		<module>youwei-store-web</module>
  </modules>
  -->
	<properties>
		<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
		<fastjson.version>1.2.12</fastjson.version>
		<commons-lang.version>2.6</commons-lang.version>
		<commons-collections.version>3.2.1</commons-collections.version>
		<slf4j.version>1.7.21</slf4j.version>
		<log4j.version>1.2.17</log4j.version>
		<build.plugins.plugin.version>3.0.1</build.plugins.plugin.version>
		<spark.version>2.3.0</spark.version>
		<postgresql.version>42.2.5</postgresql.version>
		<scala.binary.version>2.11</scala.binary.version>
		<scala.version>2.11.7</scala.version>
		<junit.version>4.12</junit.version>
		<flink.version>1.8.1</flink.version>
		<hadoop.version>2.7.4</hadoop.version>
		<zookeeper.version>3.4.13</zookeeper.version>
		<!--<hbase.version>1.4.1</hbase.version>-->
        <hbase.version>2.1.0</hbase.version>
		<kafka.version>2.0.1</kafka.version>
		<blink.version>blink-3.2.2</blink.version>
		<blink-datahub.version>0.1-SNAPSHOT</blink-datahub.version>
		<mysql.version>5.1.36</mysql.version>
        <!--  引入spark 迁移离线作业到maxcompute -->
        <spark.version>2.3.0</spark.version>
        <cupid.sdk.version>3.3.8-public</cupid.sdk.version>
		<archery.version>0.3.0</archery.version>
		<mmseg4j.version>1.10.0</mmseg4j.version>
		<!--  引入es -->
		<es.version>6.3.0</es.version>
		<!-- 引入redis -->
		<redis.version>4.0.1</redis.version>
		<!--引入Scala单元测试-->
		<scalatest.version>3.2.0</scalatest.version>
        <!-- 阿里hbase版本 -->
        <alihbase.version>2.8.4</alihbase.version>
		<!-- 引入Hologress client -->
		<hologres-spark2.version>1.0-SNAPSHOT</hologres-spark2.version>
		<!--  引入maxcompute jdbc sdk -->
		<odps-jdbc.version>3.1.0</odps-jdbc.version>
	</properties>

		<dependencies>
			<dependency>
				<groupId>com.aliyun</groupId>
				<artifactId>aliyun-java-sdk-airec</artifactId>
				<version>1.2.2</version>
				<exclusions>
					<exclusion>
						<groupId>com.google.code.gson</groupId>
						<artifactId>gson</artifactId>
					</exclusion>
				</exclusions>
			</dependency>
			<dependency>
				<groupId>com.aliyun</groupId>
				<artifactId>aliyun-java-sdk-core</artifactId>
				<version>4.4.2</version>
				<exclusions>
					<exclusion>
						<artifactId>commons-codec</artifactId>
						<groupId>commons-codec</groupId>
					</exclusion>
					<exclusion>
						<artifactId>activation</artifactId>
						<groupId>javax.activation</groupId>
					</exclusion>
				</exclusions>
			</dependency>
			<!-- Logging API start-->
			<dependency>
				<groupId>org.slf4j</groupId>
				<artifactId>jcl-over-slf4j</artifactId>
				<version>${slf4j.version}</version>
			</dependency>
			<dependency>
				<groupId>org.slf4j</groupId>
				<artifactId>slf4j-api</artifactId>
				<version>${slf4j.version}</version>
			</dependency>
			<dependency>
				<groupId>org.slf4j</groupId>
				<artifactId>slf4j-log4j12</artifactId>
				<version>${slf4j.version}</version>
			</dependency>
			<dependency>
				<groupId>log4j</groupId>
				<artifactId>log4j</artifactId>
				<version>${log4j.version}</version>
			</dependency>
			<!-- Logging API end-->
			<dependency>
				<groupId>com.alibaba</groupId>
				<artifactId>fastjson</artifactId>
				<version>${fastjson.version}</version>
			</dependency>
			<dependency>
				<groupId>commons-lang</groupId>
				<artifactId>commons-lang</artifactId>
				<version>${commons-lang.version}</version>
			</dependency>		
			<dependency>
				<groupId>commons-collections</groupId>
				<artifactId>commons-collections</artifactId>
				<version>${commons-collections.version}</version>
			</dependency>
			<!-- 引入scala -->
			<dependency>
				<groupId>org.apache.spark</groupId>
				<artifactId>spark-mllib_${scala.binary.version}</artifactId>
				<version>${spark.version}</version>
				<scope>provided</scope>
			</dependency>
			<dependency>
				<groupId>com.meetup</groupId>
				<artifactId>archery_${scala.binary.version}</artifactId>
				<version>${archery.version}</version>
				<scope>provided</scope>
			</dependency>
			<!-- 引入分词-->
			<dependency>
				<groupId>com.chenlb.mmseg4j</groupId>
				<artifactId>mmseg4j-core</artifactId>
				<version>${mmseg4j.version}</version>
				<scope>provided</scope>
			</dependency>
			<dependency>
				<groupId>org.scala-lang</groupId>
				<artifactId>scala-library</artifactId>
				<version>${scala.version}</version>
			</dependency>
			<dependency>
				<groupId>org.scala-lang</groupId>
				<artifactId>scala-actors</artifactId>
				<version>${scala.version}</version>
			</dependency>
			<dependency>
				<groupId>org.scala-lang</groupId>
				<artifactId>scala-compiler</artifactId>
				<version>${scala.version}</version>
				<scope>provided</scope>
			</dependency>
			<dependency>
				<groupId>org.scala-lang</groupId>
				<artifactId>scala-reflect</artifactId>
				<version>${scala.version}</version>
				<scope>provided</scope>
			</dependency>
			<dependency>
				<groupId>org.scala-tools</groupId>
				<artifactId>maven-scala-plugin</artifactId>
				<version>2.9.1</version>
			</dependency>
			<dependency>
				<groupId>junit</groupId>
				<artifactId>junit</artifactId>
				<version>${junit.version}</version>
				<scope>test</scope>
			</dependency>
            <dependency>
                <groupId>com.aliyun.hbase</groupId>
                <artifactId>alihbase-client</artifactId>
                <version>${alihbase.version}</version>
                <exclusions>
                    <exclusion>
                        <groupId>com.fasterxml.jackson.core</groupId>
                        <artifactId>jackson-databind</artifactId>
                    </exclusion>
					<exclusion>
						<artifactId>jdk.tools</artifactId>
						<groupId>jdk.tools</groupId>
					</exclusion>
                </exclusions>
            </dependency>
			<!-- 引入hbase -->
            <!--<dependency>-->
                <!--<groupId>org.apache.hbase</groupId>-->
                <!--<artifactId>hbase-client</artifactId>-->
                <!--<version>${hbase.version}</version>-->
				<!--<exclusions>-->
					<!--<exclusion>-->
						<!--<groupId>org.mortbay.jetty</groupId>-->
						<!--<artifactId>jetty-sslengine</artifactId>-->
					<!--</exclusion>-->
                    <!--<exclusion>-->
                        <!--<groupId>org.mortbay.jetty</groupId>-->
                        <!--<artifactId>jetty-util</artifactId>-->
                    <!--</exclusion>-->
                    <!--<exclusion>-->
                        <!--<groupId>org.apache.hadoop</groupId>-->
                        <!--<artifactId>hadoop-mapreduce-client-core</artifactId>-->
                    <!--</exclusion>-->
					<!--&lt;!&ndash;-->
                    <!--<exclusion>-->
                        <!--<groupId>io.netty</groupId>-->
                        <!--<artifactId>netty-all</artifactId>-->
                    <!--</exclusion>-->
                    <!--&ndash;&gt;-->
				<!--</exclusions>-->
            <!--</dependency>-->
            <!--<dependency>-->
                <!--<groupId>org.apache.hbase</groupId>-->
                <!--<artifactId>hbase-common</artifactId>-->
                <!--<version>${hbase.version}</version>-->
                <!--<exclusions>-->
                    <!--<exclusion>-->
                        <!--<groupId>org.mortbay.jetty</groupId>-->
                        <!--<artifactId>jetty-util</artifactId>-->
                    <!--</exclusion>-->
					<!--<exclusion>-->
						<!--<groupId>org.mortbay.jetty</groupId>-->
						<!--<artifactId>jetty-sslengine</artifactId>-->
					<!--</exclusion>-->
					<!--&lt;!&ndash;-->
					<!--<exclusion>-->
						<!--<artifactId>io.netty</artifactId>-->
						<!--<groupId>netty-all</groupId>-->
					<!--</exclusion>-->
					<!--&ndash;&gt;-->
                <!--</exclusions>-->
            <!--</dependency>-->
			<!--<dependency>-->
				<!--<groupId>com.alibaba.hbase</groupId>-->
				<!--<artifactId>alihbase-connector</artifactId>-->
				<!--<version>1.0.12</version>-->
				<!--<exclusions>-->
					<!--<exclusion>-->
						<!--<groupId>org.apache.hbase</groupId>-->
						<!--<artifactId>hbase-client</artifactId>-->
					<!--</exclusion>-->
				<!--</exclusions>-->
			<!--</dependency>-->
			<!--  引入mysql -->
			<dependency>
				<groupId>mysql</groupId>
				<artifactId>mysql-connector-java</artifactId>
				<version>${mysql.version}</version>
			</dependency>
            <!-- 引入spark -->
            <dependency>
                <groupId>org.apache.spark</groupId>
                <artifactId>spark-core_${scala.binary.version}</artifactId>
                <version>${spark.version}</version>
                <scope>provided</scope>
                <exclusions>
                    <exclusion>
                        <groupId>org.apache.hadoop</groupId>
                        <artifactId>hadoop-client</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>org.apache.spark</groupId>
                <artifactId>spark-sql_${scala.binary.version}</artifactId>
                <version>${spark.version}</version>
                <scope>provided</scope>
            </dependency>
<!--            <dependency>-->
<!--                <groupId>com.aliyun.odps</groupId>-->
<!--                <artifactId>cupid-sdk</artifactId>-->
<!--                <version>${cupid.sdk.version}</version>-->
<!--                <scope>provided</scope>-->
<!--            </dependency>-->
            <dependency>
                <groupId>com.aliyun.odps</groupId>
                <artifactId>hadoop-fs-oss</artifactId>
                <version>${cupid.sdk.version}</version>
            </dependency>
            <dependency>
                <groupId>com.aliyun.odps</groupId>
                <artifactId>odps-spark-datasource_${scala.binary.version}</artifactId>
                <version>${cupid.sdk.version}</version>
            </dependency>
			<!-- 引入ES -->
			<dependency>
				<groupId>org.elasticsearch</groupId>
				<artifactId>elasticsearch-spark-20_2.11</artifactId>
				<version>${es.version}</version>
				<scope>provided</scope>
			</dependency>
			<dependency>
				<groupId>org.elasticsearch</groupId>
				<artifactId>elasticsearch-core</artifactId>
				<version>${es.version}</version>
				<scope>provided</scope>
			</dependency>
			<!-- redis-->
			<dependency>
				<groupId>redis.clients</groupId>
				<artifactId>jedis</artifactId>
				<version>${redis.version}</version>
			</dependency>
			<!-- 引入MongoDB spark插件 -->
			<dependency>
				<groupId>org.mongodb.spark</groupId>
				<artifactId>mongo-spark-connector_${scala.binary.version}</artifactId>
				<version>${spark.version}</version>
			</dependency>
			<!-- 引入Scala的单元测试框架 -->
			<dependency>
				<groupId>org.scalatest</groupId>
				<artifactId>scalatest_${scala.binary.version}</artifactId>
				<version>${scalatest.version}</version>
				<scope>test</scope>
			</dependency>
			<!-- 添加阿里云dataworks api服务 -->
			<!--<dependency>-->
				<!--<groupId>com.aliyun</groupId>-->
				<!--<artifactId>aliyun-java-sdk-core</artifactId>-->
				<!--<version>4.1.0</version>-->
                <!--&lt;!&ndash;<version>4.5.1</version>&ndash;&gt;-->
				<!--<scope>test</scope>-->
			<!--</dependency>-->
			<dependency>
				<groupId>com.aliyun</groupId>
				<artifactId>aliyun-java-sdk-dataworks-public</artifactId>
				<version>1.8.3</version>
				<scope>test</scope>
			</dependency>
			<!-- 引入hologress -->
			<dependency>
				<groupId>com.alibaba</groupId>
				<artifactId>hologres-spark2</artifactId>
				<version>${hologres-spark2.version}</version>
			</dependency>
			<!-- 引入maxcompute sdk -->
			<dependency>
				<groupId>com.aliyun.odps</groupId>
				<artifactId>odps-jdbc</artifactId>
				<version>${odps-jdbc.version}</version>
				<classifier>jar-with-dependencies</classifier>
			</dependency>
		</dependencies>
	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>3.6.0</version>
				<configuration>
					<source>1.8</source>
					<target>1.8</target>
					<encoding>UTF-8</encoding>
				</configuration>
			</plugin>
			<plugin>
				<groupId>net.alchim31.maven</groupId>
				<artifactId>scala-maven-plugin</artifactId>
				<version>3.4.4</version>
				<executions>
					<execution>
						<id>scala-compile-first</id>
						<phase>process-resources</phase>
						<goals>
							<goal>add-source</goal>
							<goal>compile</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-source-plugin</artifactId>
				<version>${build.plugins.plugin.version}</version>
				<configuration>  
					<attach>true</attach>  
				</configuration>  
				<executions>  
					<execution>  
						<phase>compile</phase>  
						<goals>  
							<goal>jar</goal>  
						</goals>  
					</execution>  
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-jar-plugin</artifactId>
				<version>3.1.1</version>
				<configuration>
					<excludes>
						<exclude>flink-table_2.11-blink-3.2.2.jar</exclude>
						<exclude>flink-runtime_2.11-blink-3.2.2.jar</exclude>
					</excludes>
				  <archive>
					<manifest>
					  
					</manifest>
					
				  </archive>
				</configuration>
			 </plugin>
			 <plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<executions>
				  <execution>
					<id>copy</id>
					<phase>package</phase>
					<goals>
					  <goal>copy-dependencies</goal>
					</goals>
					<configuration>
					  <!-- ${project.build.directory} 构建目录，缺省为target -->
					  <outputDirectory>
						${project.build.directory}/lib
					  </outputDirectory>
						<excludeScope>provided</excludeScope>
					</configuration>
				  </execution>
				</executions>
			 </plugin>
			 
			 <plugin>    
                <artifactId>maven-assembly-plugin</artifactId>    
                <configuration>    
                    <descriptorRefs>    
                        <descriptorRef>jar-with-dependencies</descriptorRef>    
                    </descriptorRefs>    
                    <archive>    
                        <manifest>    
                          <mainClass></mainClass>    
                        </manifest>    
                    </archive>    
                </configuration>    
                <executions>    
                    <execution>    
                        <id>make-assembly</id>    
                        <phase>package</phase>    
                        <goals>    
                            <goal>single</goal>    
                        </goals>    
                    </execution>    
              </executions>    
            </plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-shade-plugin</artifactId>
				<version>3.2.4</version>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>shade</goal>
						</goals>
						<configuration>
							<minimizeJar>false</minimizeJar>
							<shadedArtifactAttached>true</shadedArtifactAttached>
							<relocations>
								<relocation>
									<pattern>io.netty</pattern>
									<shadedPattern>io.nettynew</shadedPattern>
								</relocation>
								<relocation>
									<pattern>com.aliyuncs</pattern>
									<shadedPattern>com.aliyuncsnew</shadedPattern>
								</relocation>
                                <!--
                                <relocation>
                                    <pattern>org.apache.hadoop</pattern>
                                    <shadedPattern>org.apache.newhadoop</shadedPattern>
                                </relocation>
                                -->
							</relocations>
							<artifactSet>
								<includes>
									<!-- Include here the dependencies you
                                        want to be packed in your fat jar -->
									<include>*:*</include>
								</includes>
							</artifactSet>
							<filters>
								<filter>
									<artifact>*:*</artifact>
									<excludes>
										<exclude>META-INF/*.SF</exclude>
										<exclude>META-INF/*.DSA</exclude>
										<exclude>META-INF/*.RSA</exclude>
									</excludes>
								</filter>
							</filters>
							<transformers>
								<transformer
										implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
									<resource>reference.conf</resource>
								</transformer>
							</transformers>
						</configuration>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
	<repositories>
		<!--添加aliyun maven地址 -->
		<repository>
			<id>maven-ali</id>
			<url>http://maven.aliyun.com/nexus/content/groups/public/</url>
			<releases>
				<enabled>true</enabled>
			</releases>
			<snapshots>
				<enabled>true</enabled>
				<updatePolicy>always</updatePolicy>
				<checksumPolicy>fail</checksumPolicy>
			</snapshots>
		</repository>
	</repositories>
</project>
